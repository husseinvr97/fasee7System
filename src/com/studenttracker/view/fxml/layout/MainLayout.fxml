<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!--
  Main Layout FXML
  
  Purpose: Main application shell with navigation
  Controller: MainLayoutController
  
  Structure:
  - Top: Header (Logo, User Info, Logout)
  - Left: Sidebar Navigation
  - Center: Dynamic Content Area
  
  Features:
  - Role-based menu visibility
  - Active button highlighting
  - Dynamic content loading
-->

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.studenttracker.controller.layout.MainLayoutController"
            prefHeight="800.0" prefWidth="1200.0"
            styleClass="main-layout"
            stylesheets="@../../css/styles.css">

    <!-- ==================== TOP: HEADER ==================== -->
    <top>
        <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20.0">
            <padding>
                <Insets top="15.0" right="25.0" bottom="15.0" left="25.0"/>
            </padding>
            
            <!-- Logo/Title -->
            <Label text="Fasee7 System" styleClass="header-title">
                <font>
                    <Font name="System Bold" size="20.0"/>
                </font>
            </Label>
            
            <!-- Spacer to push user info to right -->
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- User Info Label -->
            <Label fx:id="userInfoLabel" text="User: Loading..." styleClass="user-info">
                <font>
                    <Font size="14.0"/>
                </font>
            </Label>
            
            <!-- Logout Button -->
            <Button fx:id="logoutButton" 
                   text="Logout" 
                   onAction="#handleLogout"
                   styleClass="logout-button">
                <font>
                    <Font size="13.0"/>
                </font>
            </Button>
        </HBox>
    </top>

    <!-- ==================== LEFT: SIDEBAR NAVIGATION ==================== -->
    <left>
        <VBox fx:id="sidebar" styleClass="sidebar" spacing="5.0" prefWidth="220.0">
            <padding>
                <Insets top="15.0" right="10.0" bottom="15.0" left="10.0"/>
            </padding>
            
            <!-- Dashboard -->
            <Button fx:id="dashboardBtn" 
                   text="ðŸ   Dashboard" 
                   onAction="#showDashboard"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Students -->
            <Button fx:id="studentsBtn" 
                   text="ðŸ‘¥  Students" 
                   onAction="#showStudents"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Lessons -->
            <Button fx:id="lessonsBtn" 
                   text="ðŸ“š  Lessons" 
                   onAction="#showLessons"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Missions -->
            <Button fx:id="missionsBtn" 
                   text="ðŸŽ¯  Missions" 
                   onAction="#showMissions"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Fasee7 Table -->
            <Button fx:id="fasee7Btn" 
                   text="ðŸ†  Fasee7 Table" 
                   onAction="#showFasee7"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Warnings -->
            <Button fx:id="warningsBtn" 
                   text="âš ï¸  Warnings" 
                   onAction="#showWarnings"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Notifications -->
            <Button fx:id="notificationsBtn" 
                   text="ðŸ””  Notifications" 
                   onAction="#showNotifications"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Reports -->
            <Button fx:id="reportsBtn" 
                   text="ðŸ“ˆ  Reports" 
                   onAction="#showReports"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Update Requests (Admin Only) -->
            <Button fx:id="updateRequestsBtn" 
                   text="ðŸ“‹  Requests" 
                   onAction="#showUpdateRequests"
                   maxWidth="Infinity"
                   styleClass="nav-button"
                   managed="true"
                   visible="true">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
            
            <!-- Spacer to push settings to bottom -->
            <Region VBox.vgrow="ALWAYS"/>
            
            <!-- Settings -->
            <Button fx:id="settingsBtn" 
                   text="âš™ï¸  Settings" 
                   onAction="#showSettings"
                   maxWidth="Infinity"
                   styleClass="nav-button">
                <font>
                    <Font size="14.0"/>
                </font>
            </Button>
        </VBox>
    </left>

    <!-- ==================== CENTER: CONTENT AREA ==================== -->
    <center>
        <StackPane fx:id="contentArea" styleClass="content-area">
            <!-- Content views will be loaded here dynamically -->
            
            <!-- Default placeholder -->
            <VBox alignment="CENTER" spacing="20.0">
                <Label text="Welcome to Fasee7 System" styleClass="dashboard-title">
                    <font>
                        <Font name="System Bold" size="24.0"/>
                    </font>
                </Label>
                <Label text="Select an option from the sidebar to begin" styleClass="section-title">
                    <font>
                        <Font size="16.0"/>
                    </font>
                </Label>
            </VBox>
        </StackPane>
    </center>
</BorderPane>
